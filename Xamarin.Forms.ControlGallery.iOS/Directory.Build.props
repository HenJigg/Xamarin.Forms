<Project>


  <PropertyGroup Condition="'$(CI)' == 'true'">
    <_XamarinFormsVersion>$(BUILD_BUILDNUMBER.Split(`+`)[0])</_XamarinFormsVersion>
    <XamarinFormsVersion Condition="Exists('$(BUILD_SOURCESDIRECTORY)/Nuget/Xamarin.Forms.$(_XamarinFormsVersion).nupkg')" >$(_XamarinFormsVersion)</XamarinFormsVersion>
  </PropertyGroup>

  <!-- Build from source or nugets-->
  <PropertyGroup>
    <XamarinFormsVersion Condition="'$(XamarinFormsVersion)' == ''"></XamarinFormsVersion>
    <FromSource Condition="'$(XamarinFormsVersion)' != ''">false</FromSource>
    <FromSource Condition="'$(FromSource)' == ''">true</FromSource>
  </PropertyGroup>

  <PropertyGroup>
    <Use2017 Condition="'$(Use2017)' == '' AND '$(MSBuildAssemblyVersion)' &lt; '16.0'">true</Use2017>
    <Use2017 Condition="'$(Use2017)' == '' AND '$(XamarinFormsVersion)' != '' AND '$(CI)' == 'true'">true</Use2017>
    <Use2017 Condition="'$(Use2017)' == ''">false</Use2017>
  </PropertyGroup>

</Project> 
